# ЛР_2 Оценка задержки реакции на внешнее воздействие

## Задание
1) Написать символьный драйвер, который будет генерировать с заданной частотой внешнее воздействие
2) Измерить время реакции(среднее и максимальное)
3) Оценить влияние


## Описание
Модуль ядра Linux, предназначенный для измерения и анализа времени реакции процессов. Он использует таймеры ядра и сигналы для осуществления измерений и предоставляет интерфейс для получения статистических данных о зарегистрированных временах реакции.

### Команды IOCTL

Модуль поддерживает две команды IOCTL для взаимодействия:

1. Установить Частоту Таймера:

   • Команда: ```IOCTL_SET_FREQUENCY```

   • Описание: Устанавливает частоту таймера (в миллисекундах) для измерения времен реакции.

   • Использование:
          ```ioctl(fd, IOCTL_SET_FREQUENCY, &frequency);```
     

2. Получить Статистику:

   • Команда: ```IOCTL_GET_STATS```

   • Описание: Получает статистику о зарегистрированных временах реакции, включая среднее время, максимальное время и гистограмму.

   • Использование:
     ```
          struct stats my_stats;
     ioctl(fd, IOCTL_GET_STATS, &my_stats);
     ```

### Измерение Времени Реакции

Для измерения времени реакции модуль отправляет сигнал (SIGUSR1) текущему процессу через регулярные интервалы, определяемые частотой таймера. Процесс должен обрабатывать этот сигнал и вызывать функцию measure_reaction_time(), чтобы зафиксировать свое время реакции.

### Структура Данных

Статистика хранится в следующей структуре:
```
struct stats {
    unsigned long average_time;    // Среднее время реакции.
    unsigned long max_time;        // Максимальное время реакции.
    unsigned long histogram[BINS]; // Массив гистограммы для времен реакции.
};
```

### Ограничения

• Максимальное количество зарегистрированных времен реакции ограничено значением MAX_REACTIONS.

• Гистограмма делится на BINS для статистического представления, что может не охватывать все вариации времен реакции.

### Предварительные требования

• Операционная система Linux с установленными инструментами для разработки ядра (например, gcc, make и т.д.).

• Заголовочные файлы ядра, соответствующие вашей версии ядра.

### Загрузка модуля в ядро
```
sudo insmod reaction_time_analyzer.ko
```

### Удаление модуля

```
sudo rmmod reaction_time_analyzer
```
